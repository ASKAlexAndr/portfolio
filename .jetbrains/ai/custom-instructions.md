# JetBrains AI Assistant — Custom Instructions (для этого репозитория)

Назначение: единая инструкция для JetBrains AI Assistant. Скопируйте содержимое в IDE: Settings/Preferences → Tools → AI Assistant → Custom instructions.

Источник истины: правила проекта описаны в .cursor/rules.md. Этот файл — конденсированная версия, должен оставаться синхронизированным с .cursor/rules.md. При расхождениях приоритет у .cursor/rules.md.

## Контекст проекта
- TypeScript (strict).
- Next.js (App Router), React 19.
- Tailwind CSS + clsx + tailwind-merge.
- i18n: next-i18next + react-i18next (строки UI через t()).
- Анимации: framer-motion.
- Иконки: lucide-react (по умолчанию), react-icons — если в lucide нет аналога.
- Пакетный менеджер: yarn. Команды: yarn, yarn add, yarn add -D.
- Линт/формат: eslint-config-next + Prettier.

## Жесткие ограничения
- Не изменяйте артефакты сборки/зависимостей и lock-файлы.
- Не редактируйте строки/блоки, помеченные “IMPORTANT”.
- Не добавляйте секреты/ключи/пароли в код. Используйте плейсхолдеры (<API_KEY>, <API_URL>).
- Используйте только yarn (не генерируйте в ответах npm/pnpm/bun команды).

## React/Next
- Не импортируйте React по умолчанию в компонентах (React 19 JSX runtime); импортируйте именованные хуки/утилиты.
- Клиентские хуки — только в файлах с "use client".
- Изображения — через next/image; указывайте sizes, разумный priority.
- Предпочитайте серверные компоненты для получения данных; управляйте кэшем (fetch cache / next.revalidate).
- Не используйте inline-стили без необходимости; стили — Tailwind + clsx/tailwind-merge (cn).

## i18n
- Не хардкодьте строки интерфейса, используйте t('namespace.key').
- Понятные ключи с неймспейсами: common.button.save, form.email.label.

## Типизация и качество кода
- Строгая типизация пропсов/возвратов; избегать any (предпочтительно unknown + type guards, generics).
- Оптимизация рендеров:
  - useCallback — для функций, передаваемых в пропсы/используемых в зависимостях/с сложной логикой.
  - useMemo — для тяжелых вычислений, фильтраций/сортировок, объектов/массивов, передаваемых как пропсы.
  - React.memo — для часто перерендериваемых/тяжелых компонентов.

## Accessibility и UX
- aria-имена/ролей/фокус — обязательны; alt у изображений; контраст соответствующий WCAG AA.

## Ошибки и API
- Явная обработка ошибок; не логируйте чувствительные данные.
- Клиенты и обертки для fetch — в отдельном слое; без смешивания с UI.

## Выводы AI (формат ожиданий)
- Минимально необходимые правки без скрытого рефакторинга.
- Следуйте ESLint/Prettier и принятому порядку импортов (builtin, external, internal).
- Для крупных изменений предлагайте план, дробите на шаги.
- Не изменяйте публичные API без явной задачи/миграции.

Примечание: поддерживайте синхронизацию с .cursor/rules.md. Если правила эволюционируют, обновите этот файл и персональные Custom instructions в IDE.
