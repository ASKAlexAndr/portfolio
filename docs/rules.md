# Project Rules — AI, Style & Conventions

Источник истины для AI-агентов и разработчиков. Этот документ объединяет правила из .cursor/rules.md, .jetbrains/ai/custom-instructions.md и внутренних конвенций.

## Tech stack
- TypeScript (strict).
- Next.js (App Router), React 19.
- Tailwind CSS + clsx + tailwind-merge.
- i18n: next-i18next + react-i18next.
- Анимации: framer-motion.
- Иконки: lucide-react (по умолчанию), react-icons — при необходимости.
- Пакетный менеджер: yarn (обязательно). Команды: yarn, yarn add, yarn add -D.
- Линт/формат: eslint-config-next + Prettier.

## Общие принципы
- Пиши простой, предсказуемый, типобезопасный код. Избегай any.
- Строки UI — через i18n (t('...')); не хардкодить текст.
- Следуй правилам ниже; при конфликте — best practices Next.js/React и ESLint проекта.

## React/Next
- Не импортируй React по умолчанию (React 19 JSX runtime).
- Разделяй Server/Client компоненты. Клиентские — "use client".
- Не используй inline-стили; стили — Tailwind.
- Изображения — next/image, указывать sizes/priority по необходимости.

## Оптимизация и хуки
- useMemo — для тяжелых вычислений, фильтраций/сортировок и объектов/массивов, передаваемых как пропсы.
- useCallback — для функций, передаваемых как пропсы или зависящих от внешних значений.
- React.memo — для часто перерендериваемых/тяжелых компонентов.

### Статичные массивы и объекты
- Если создается массив/объект в useMemo и он не зависит от пропсов/состояния/контекста/локализации — вынеси его в модульную область (вне компонента).
  - Примеры: списки иконок, статичные contactItems, highlights без t().
  - Если нужна производная структура — мемоизируй вычисление от модульной константы.
- Не используй useMemo «для порядка», когда данные зависят от t — создавай массивы напрямую в компоненте, без мемоизации.

### Обработчики и useCallback
- Если функция не зависит от пропсов/состояния и не нужна для мемоизации дочерних — объявляй на уровне модуля, не wrap в useCallback([]).
- useCallback применяй, когда есть реальные зависимости или функция участвует в зависимостях других хуков.

## i18n
- Понятные ключи и неймспейсы: common.button.save, form.email.label.
- Все пользовательские строки — через t(). Язык определяется провайдерами проекта.

## Доступность (a11y)
- aria-имена/роли/фокус — обязательны; alt у изображений; контраст WCAG AA.

## Производительность UI
- Избегай анимации больших контейнеров без необходимости (framer-motion).
- Контролируй кэш Next при загрузке данных (fetch cache / next.revalidate).

## Фоны и визуальные эффекты
- Избегай «стыков» градиентов за счет крупных радиальных слоев (radial-gradient) и мягких масок (mask-image).
- Декоративные сетки/шум — с низкой непрозрачностью поверх радиальных градиентов.

## Инструменты и пакеты
- Устанавливай пакеты только yarn.
- Не коммить секреты/ENV.

## Git/CI
- Conventional Commits: feat, fix, refactor, chore, docs, test, perf, build, ci.
- PR — с описанием, небольшого объема; все проверки CI должны проходить.

---
Этот файл поддерживается как единый источник правил. IDE/инструменты могут ссылаться на него как на canonical.
